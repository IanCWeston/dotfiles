---
- name: "Set up development environment"
  hosts: localhost
  connection: local
  become: yes

  vars:
    default_user: ian

  tasks:
    
  - name: "{{ item.description }}"
    ansible.builtin.dnf:
      name: "{{ item.packages }}"
      state: latest
    loop:
      - description: "Update existing system packages"
        packages: "*"
      - description: "Install initial tools"
        packages:
          - gcc
          - gcc-c++
          - unzip
          - make
          - tmux
          - zsh

  - name: "Copy over config files"
    ansible.builtin.copy:
      src: ../xdg_config/
      dest: /home/ian/.config/
      owner: "{{ default_user }}"
      group: "{{ default_user }}"

  - name: "Download rtx"
    ansible.builtin.get_url:
      url: https://rtx.pub/rtx-latest-linux-x64
      dest: /home/ian/.local/bin/rtx
      owner: "{{ default_user }}"
      mode: "0774"
